// @ts-nocheck
Array.prototype.groupBy=function(t){return this.reduce(((r,e)=>{const n=e[t];return r[n]||(r[n]=[]),r[n].push(e),r}),{})},Array.prototype.keyBy=function(t){return this.reduce(((r,e)=>(r[e[t]]=e,r)),{})},Array.prototype.sum=function(t){return this.reduce(((r,e)=>t&&e.hasOwnProperty(t)?r+Number(e[t]):r+e),0)},Array.prototype.sumExp=function(t){return this.reduce(((r,e)=>r+t(e)),0)},Array.prototype.avg=function(t){return parseFloat((this.sum(t)/this.length).toFixed(4))},Array.prototype.sumMultiple=function(t){return this.reduce(((r,e)=>{let n=0;return t.forEach((t=>{t&&e.hasOwnProperty(t)&&(n+=Number(e[t]))})),r+n}),0)},Array.prototype.pluckUnique=function(t){return[...new Set(this.map((r=>r[t])))]},Array.prototype.pluck=function(t){return this.map((r=>r[t]))},Array.prototype.groupBySum=function(t,r,e="number"){return this.reduce(((n,i)=>{const o=i[t];return n[o]||(n[o]=0),n[o]+="number"==e?Number(i[r]):i[r],n}),{})},Array.prototype.unique=function(){return[...new Set(this)]},Array.prototype.aggregateByKey=function(...t){return this.reduce(((r,e)=>{const n=t.map((t=>e[t])).join(".");return r[n]||(r[n]={qty:0,amount:0}),r[n].qty+=e.qty||0,r[n].amount+=e.amount||0,r}),{})},Array.prototype.where=function(t,r){return this.filter((e=>e[t]==r))},Array.prototype.whereNull=function(t){return this.filter((r=>null==r[t]))},Array.prototype.chunk=function(t){const r=[];for(let e=0;e<this.length;e+=t)r.push(this.slice(e,e+t));return r},Array.prototype.whereLike=function(t,r){return this.filter((e=>{let n=e[t].toString().toLowerCase(),i=r.toLowerCase();if(i.startsWith("%")&&i.endsWith("%")){let t=i.slice(1,-1);return n.includes(t)}if(i.startsWith("%")){let t=i.slice(1);return n.endsWith(t)}if(!i.endsWith("%"))return n===i;{let t=i.slice(0,-1);return n.startsWith(t)}}))},Array.prototype.index=function(t,r){return this.findIndex((e=>e[t]==r))},Array.prototype.whereNotIn=function(t,r){return this.filter((e=>!r.includes(e[t])))},Array.prototype.whereNot=function(t,r){return this.filter((e=>e[t]!=r))},Array.prototype.like=function(t,r){return this.filter((e=>e[t].toString().includes(r)))},Array.prototype.first=function(t=null,r=null){if(null==t&&null==r){if(0==this.length)return;return this[0]}return this.find((e=>e[t]==r))},Array.prototype.sortBy=function(t="asc",r=null){if(0===this.length)return this;let e=(t,e)=>{let n=r?t[r]:t,i=r?e[r]:e;if("number"==typeof n&&"number"==typeof i)return n-i;if("string"==typeof n&&"string"==typeof i)return n.localeCompare(i);throw Error("Unsupported data type for sorting")};if("asc"===t)this.sort(e);else{if("desc"!==t)throw Error("Invalid sort direction");this.sort(((t,r)=>e(r,t)))}return this},Array.prototype.last=function(t=null,r=null){if(null==t&&null==r){if(0==this.length)return;return this[this.length-1]}return this.findLast((e=>e[t]==r))},Array.prototype.take=function(t=1){return 0==this.length?[]:(t>this.length&&(t=this.length),this.slice(0,t))},Array.prototype.isSubset=function(t){if(!Array.isArray(t))return!1;if(0===t.length)return!0;let r=new Set(t);for(let t=0;t<this.length;t++)if(r.has(this[t])&&(r.delete(this[t]),0===r.size))return!0;return!1},Array.prototype.whereIn=function(t,r){if(!Array.isArray(r))throw TypeError("values should be an array");return this.filter((e=>r.includes(e[t])))},Array.prototype.zeroAtLast=function(t){return this.sort(((r,e)=>0===r[t]&&0!==e[t]?1:0!==r[t]&&0===e[t]?-1:0))},Array.prototype.toCSV=function(t="data.csv"){let r=this.map((t=>t.join(","))).join("\n"),e=new Blob([r],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a");if(void 0!==n.download){let r=URL.createObjectURL(e);n.setAttribute("href",r),n.setAttribute("download",t),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},Array.prototype.toHashMap=function(t,r){return this.reduce(((e,n)=>(void 0!==n[t]&&(e[n[t]]=n[r]),e)),{})},Array.prototype.getMaxByProperty=function(t){return 0===this.length?null:this.reduce(((r,e)=>e[t]>r[t]?e:r),this[0])},Array.prototype.getMax=function(t){if(0===this.length)return null;let r=this[0][t];for(let e=1;e<this.length;e++){if(!this[e].hasOwnProperty(t))throw new Error(`Object at index ${e} does not have property '${t}'.`);this[e][t]>r&&(r=this[e][t])}return r},Array.prototype.min=function(t){if(0!==this.length)return this.reduce(((r,e)=>t?e[t]<r[t]?e:r:e<r?e:r),this[0])};